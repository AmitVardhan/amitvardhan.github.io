<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Nine Ball Scoreboard</title>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap" rel="stylesheet">

<style>
* { box-sizing: border-box; }

body {
  margin: 0;
  min-height: 100vh;
  font-family: 'Orbitron', monospace;
  background: #121212;
  color: #eee;
}

/* SETUP */
#setup {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
}
.setup-box {
  background: #0a0a0a;
  padding: 30px;
  border-radius: 14px;
  width: min(92%, 420px);
  box-shadow: 0 25px 60px rgba(0,0,0,0.8);
}
.setup-box h1 {
  text-align: center;
  margin-bottom: 20px;
}
.field { margin-bottom: 14px; }
label {
  font-size: 14px;
  color: #aaa;
  display: block;
  margin-bottom: 4px;
}
input {
  width: 100%;
  padding: 10px;
  font-size: 16px;
  background: #000;
  border: 1px solid #333;
  color: #fff;
  border-radius: 6px;
}
button {
  width: 100%;
  margin-top: 20px;
  padding: 14px;
  font-size: 18px;
  background: #00c853;
  color: #000;
  border: none;
  border-radius: 10px;
  cursor: pointer;
}

/* SCOREBOARD */
#scoreboard {
  display: none;
  height: 100vh;
  width: 100%;
}

.player {
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  position: relative;
  transition: all 0.3s ease;
}
.player.active {
  box-shadow: inset 0 0 0 4px #00e676;
}
.player.inactive {
  opacity: 0.5;
}
.player:nth-child(1) { background: #0e2a2a; }
.player:nth-child(2) { background: #2a1a0e; }

.turn {
  position: absolute;
  top: 16px;
  font-size: 14px;
  color: #00e676;
}

.score {
  font-size: clamp(90px, 20vw, 170px);
  font-weight: 700;
}

.meta {
  text-align: center;
  color: #ccc;
  font-size: 16px;
}
.meta div { margin: 6px 0; }

.hint {
  margin-top: 12px;
  font-size: 12px;
  color: #aaa;
}

/* CONTROLS */
#controls {
  position: absolute;
  bottom: 20px;
  width: 100%;
  display: flex;
  justify-content: center;
  gap: 14px;
}
.control-btn {
  padding: 10px 18px;
  font-size: 14px;
  background: #333;
  border: 1px solid #555;
  color: #fff;
  border-radius: 8px;
  cursor: pointer;
}

/* WINNER */
#winnerOverlay {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.85);
  z-index: 100;
  align-items: center;
  justify-content: center;
  text-align: center;
}
#winnerOverlay h2 {
  font-size: clamp(36px, 6vw, 64px);
  color: #00e676;
  margin-bottom: 20px;
}
#winnerOverlay button {
  padding: 12px 30px;
  font-size: 18px;
  border-radius: 10px;
  background: #00c853;
  border: none;
  cursor: pointer;
}
</style>
</head>
<body>

<!-- SETUP -->
<div id="setup">
  <div class="setup-box">
    <h1>Nine Ball Match</h1>

    <div class="field">
      <label>Player 1 Name</label>
      <input id="p1Name" placeholder="Player 1">
    </div>
    <div class="field">
      <label>Player 1 Skill Level</label>
      <input id="p1Skill" type="number" min="1" max="9" value="0">
    </div>

    <div class="field">
      <label>Player 2 Name</label>
      <input id="p2Name" placeholder="Player 2">
    </div>
    <div class="field">
      <label>Player 2 Skill Level</label>
      <input id="p2Skill" type="number" min="1" max="9" value="0">
    </div>

    <button id="startBtn">Start Match</button>
  </div>
</div>

<!-- SCOREBOARD -->
<div id="scoreboard">
  <div class="player" id="player1">
    <div class="turn">AT THE TABLE</div>
    <div class="score" id="p1Score">0</div>
    <div class="meta">
      <div id="p1Info"></div>
      <div id="p1Target"></div>
      <div>Balls: <span id="p1Balls">0</span></div>
      <div>9 Balls: <span id="p1Nines">0</span></div>
    </div>
    <div class="hint">Tap +1 • Double Tap +2 (9-ball)</div>
  </div>

  <div class="player inactive" id="player2">
    <div class="turn" style="visibility:hidden;">AT THE TABLE</div>
    <div class="score" id="p2Score">0</div>
    <div class="meta">
      <div id="p2Info"></div>
      <div id="p2Target"></div>
      <div>Balls: <span id="p2Balls">0</span></div>
      <div>9 Balls: <span id="p2Nines">0</span></div>
    </div>
    <div class="hint">Tap +1 • Double Tap +2 (9-ball)</div>
  </div>

  <div id="controls">
    <button class="control-btn" id="undoBtn">Undo Last Ball</button>
    <button class="control-btn" id="changeTurnBtn">Change Player</button>
  </div>
</div>

<!-- WINNER -->
<div id="winnerOverlay">
  <div>
    <h2 id="winnerText"></h2>
    <button onclick="location.reload()">New Match</button>
  </div>
</div>

<footer>© 2025 Amit Vardhan. All rights reserved.</footer>

<script>
/* RACE TABLE */
function raceTo(skill) {
  const table = {1:14,2:19,3:25,4:31,5:38,6:46,7:55,8:65,9:75};
  return table[skill] || 38;
}

let players = [
  { score:0, balls:0, nines:0, history:[], target:0, name:'' },
  { score:0, balls:0, nines:0, history:[], target:0, name:'' }
];

let currentPlayer = 0;
let matchOver = false;

/* SETUP */
startBtn.onclick = () => {
  players[0].name = p1Name.value || 'Player 1';
  players[1].name = p2Name.value || 'Player 2';

  const s1 = +p1Skill.value;
  const s2 = +p2Skill.value;

  players[0].target = raceTo(s1);
  players[1].target = raceTo(s2);

  p1Info.textContent = `${players[0].name} (SL ${s1})`;
  p2Info.textContent = `${players[1].name} (SL ${s2})`;
  p1Target.textContent = `Race to ${players[0].target}`;
  p2Target.textContent = `Race to ${players[1].target}`;

  setup.style.display = 'none';
  scoreboard.style.display = 'flex';
  updateTurnUI();
};

/* GAME LOGIC */
function addPoint(points, isNine=false) {
  if (matchOver) return;

  const p = players[currentPlayer];
  p.score += points;
  p.balls++;
  if (isNine) p.nines++;

  p.history.push({
    points,
    isNine,
    prevPlayer: currentPlayer
  });

  updateUI();
  checkWin();
}

function undoLast() {
  if (matchOver) return;

  for (let i = players.length - 1; i >= 0; i--) {
    if (players[i].history.length) {
      const action = players[i].history.pop();
      currentPlayer = action.prevPlayer;

      players[i].score -= action.points;
      players[i].balls--;
      if (action.isNine) players[i].nines--;

      updateUI();
      updateTurnUI();
      return;
    }
  }
}

function changeTurn() {
  currentPlayer = currentPlayer === 0 ? 1 : 0;
  updateTurnUI();
}

function updateTurnUI() {
  player1.classList.toggle('active', currentPlayer === 0);
  player1.classList.toggle('inactive', currentPlayer !== 0);
  player2.classList.toggle('active', currentPlayer === 1);
  player2.classList.toggle('inactive', currentPlayer !== 1);

  player1.querySelector('.turn').style.visibility =
    currentPlayer === 0 ? 'visible' : 'hidden';
  player2.querySelector('.turn').style.visibility =
    currentPlayer === 1 ? 'visible' : 'hidden';
}

function updateUI() {
  p1Score.textContent = players[0].score;
  p2Score.textContent = players[1].score;
  p1Balls.textContent = players[0].balls;
  p2Balls.textContent = players[1].balls;
  p1Nines.textContent = players[0].nines;
  p2Nines.textContent = players[1].nines;
}

function checkWin() {
  players.forEach(p => {
    if (p.score >= p.target && !matchOver) {
      matchOver = true;
      winnerText.textContent = `${p.name} Wins!`;
      winnerOverlay.style.display = 'flex';
    }
  });
}

/* EVENTS */
player1.onclick = () => currentPlayer === 0 && addPoint(1,false);
player1.ondblclick = () => currentPlayer === 0 && addPoint(2,true);

player2.onclick = () => currentPlayer === 1 && addPoint(1,false);
player2.ondblclick = () => currentPlayer === 1 && addPoint(2,true);

undoBtn.onclick = undoLast;
changeTurnBtn.onclick = changeTurn;
</script>

</body>
</html>
